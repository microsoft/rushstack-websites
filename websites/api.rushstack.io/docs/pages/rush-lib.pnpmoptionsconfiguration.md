---
hide_title: true
custom_edit_url: null
pagination_prev: null
pagination_next: null
---
<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@microsoft/rush-lib](./rush-lib.md) &gt; [PnpmOptionsConfiguration](./rush-lib.pnpmoptionsconfiguration.md)

## PnpmOptionsConfiguration class

Options that are only used when the PNPM package manager is selected. Use this class to load "common/config/rush/pnpm-config.json" file, or, load json from "pnpmOptions" field in "rush.json" for legacy support.

**Signature:**

```typescript
export declare class PnpmOptionsConfiguration extends PackageManagerOptionsConfigurationBase 
```
**Extends:** [PackageManagerOptionsConfigurationBase](./rush-lib.packagemanageroptionsconfigurationbase.md)

## Remarks

It is valid to define these options in rush.json even if the PNPM package manager is not being used.

## Properties

<table><thead><tr><th>

Property


</th><th>

Modifiers


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[alwaysFullInstall](./rush-lib.pnpmoptionsconfiguration.alwaysfullinstall.md)


</td><td>

`readonly`


</td><td>

boolean \| undefined


</td><td>

(EXPERIMENTAL) If "true", then filtered installs ("rush install --to my-project") will be disregarded, instead always performing a full installation of the lockfile. This setting is primarily useful with Rush subspaces which enable filtering across multiple lockfiles, if filtering may be inefficient or undesirable for certain lockfiles.

The default value is false.


</td></tr>
<tr><td>

[alwaysInjectDependenciesFromOtherSubspaces](./rush-lib.pnpmoptionsconfiguration.alwaysinjectdependenciesfromothersubspaces.md)


</td><td>

`readonly`


</td><td>

boolean \| undefined


</td><td>

If true, then `rush update` add injected install options for all cross-subspace workspace dependencies, to avoid subspace doppelganger issue.

Here, the injected install refers to PNPM's PNPM's "injected dependencies" feature. Learn more: https://pnpm.io/package\_json\#dependenciesmeta


</td></tr>
<tr><td>

[autoInstallPeers](./rush-lib.pnpmoptionsconfiguration.autoinstallpeers.md)


</td><td>

`readonly`


</td><td>

boolean \| undefined


</td><td>

When true, any missing non-optional peer dependencies are automatically installed.


</td></tr>
<tr><td>

[globalAllowedDeprecatedVersions](./rush-lib.pnpmoptionsconfiguration.globalalloweddeprecatedversions.md)


</td><td>

`readonly`


</td><td>

Record&lt;string, string&gt; \| undefined


</td><td>

The `globalAllowedDeprecatedVersions` setting suppresses installation warnings for package versions that the NPM registry reports as being deprecated. This is useful if the deprecated package is an indirect dependency of an external package that has not released a fix. The settings are copied into the `pnpm.allowedDeprecatedVersions` field of the `common/temp/package.json` file that is generated by Rush during installation.

PNPM documentation: https://pnpm.io/package\_json\#pnpmalloweddeprecatedversions

If you are working to eliminate a deprecated version, it's better to specify `allowedDeprecatedVersions` in the package.json file for individual Rush projects.


</td></tr>
<tr><td>

[globalCatalogs](./rush-lib.pnpmoptionsconfiguration.globalcatalogs.md)


</td><td>

`readonly`


</td><td>

Record&lt;string, Record&lt;string, string&gt;&gt; \| undefined


</td><td>

The `globalCatalogs` setting provides named catalogs for organizing dependency versions. Each catalog can be referenced using the `catalog:catalogName` protocol in package.json files (e.g., `catalog:react18`<></>). The settings are written to the `catalogs` field of the `pnpm-workspace.yaml` file that is generated by Rush during installation.

PNPM documentation: https://pnpm.io/catalogs


</td></tr>
<tr><td>

[globalIgnoredOptionalDependencies](./rush-lib.pnpmoptionsconfiguration.globalignoredoptionaldependencies.md)


</td><td>

`readonly`


</td><td>

string\[\] \| undefined


</td><td>

The ignoredOptionalDependencies setting allows you to exclude certain optional dependencies from being installed during the Rush installation process. This can be useful when optional dependencies are not required or are problematic in specific environments (e.g., dependencies with incompatible binaries or platform-specific requirements). The listed dependencies will be treated as though they are missing, even if other packages specify them as optional dependencies. The settings are copied into the pnpm.ignoredOptionalDependencies field of the common/temp/package.json file that is generated by Rush during installation.

(SUPPORTED ONLY IN PNPM 9.0.0 AND NEWER)

PNPM documentation: https://pnpm.io/package\_json\#pnpmignoredoptionaldependencies


</td></tr>
<tr><td>

[globalNeverBuiltDependencies](./rush-lib.pnpmoptionsconfiguration.globalneverbuiltdependencies.md)


</td><td>

`readonly`


</td><td>

string\[\] \| undefined


</td><td>

The `globalNeverBuiltDependencies` setting suppresses the `preinstall`<></>, `install`<></>, and `postinstall` lifecycle events for the specified NPM dependencies. This is useful for scripts with poor practices such as downloading large binaries without retries or attempting to invoke OS tools such as a C++ compiler. (PNPM's terminology refers to these lifecycle events as "building" a package; it has nothing to do with build system operations such as `rush build` or `rushx build`<></>.) The settings are copied into the `pnpm.neverBuiltDependencies` field of the `common/temp/package.json` file that is generated by Rush during installation.

PNPM documentation: https://pnpm.io/package\_json\#pnpmneverbuiltdependencies


</td></tr>
<tr><td>

[globalOnlyBuiltDependencies](./rush-lib.pnpmoptionsconfiguration.globalonlybuiltdependencies.md)


</td><td>

`readonly`


</td><td>

string\[\] \| undefined


</td><td>

The `globalOnlyBuiltDependencies` setting specifies an allowlist of dependencies that are permitted to run build scripts (`preinstall`<></>, `install`<></>, and `postinstall` lifecycle events). This is the inverse of `globalNeverBuiltDependencies`<></>. In PNPM 10.x, build scripts are disabled by default for security, so this setting is required to explicitly permit specific packages to run their build scripts. The settings are copied into the `pnpm.onlyBuiltDependencies` field of the `common/temp/package.json` file that is generated by Rush during installation.

(SUPPORTED ONLY IN PNPM 10.1.0 AND NEWER)

PNPM documentation: https://pnpm.io/package\_json\#pnpmonlybuiltdependencies


</td></tr>
<tr><td>

[globalOverrides](./rush-lib.pnpmoptionsconfiguration.globaloverrides.md)


</td><td>

`readonly`


</td><td>

Record&lt;string, string&gt; \| undefined


</td><td>

The "globalOverrides" setting provides a simple mechanism for overriding version selections for all dependencies of all projects in the monorepo workspace. The settings are copied into the `pnpm.overrides` field of the `common/temp/package.json` file that is generated by Rush during installation.

Order of precedence: `.pnpmfile.cjs` has the highest precedence, followed by `unsupportedPackageJsonSettings`<></>, `globalPeerDependencyRules`<></>, `globalPackageExtensions`<></>, and `globalOverrides` has lowest precedence.

PNPM documentation: https://pnpm.io/package\_json\#pnpmoverrides


</td></tr>
<tr><td>

[globalPackageExtensions](./rush-lib.pnpmoptionsconfiguration.globalpackageextensions.md)


</td><td>

`readonly`


</td><td>

Record&lt;string, [IPnpmPackageExtension](./rush-lib.ipnpmpackageextension.md)<></>&gt; \| undefined


</td><td>

The `globalPackageExtension` setting provides a way to patch arbitrary package.json fields for any PNPM dependency of the monorepo. The settings are copied into the `pnpm.packageExtensions` field of the `common/temp/package.json` file that is generated by Rush during installation. The `globalPackageExtension` setting has similar capabilities as `.pnpmfile.cjs` but without the downsides of an executable script (nondeterminism, unreliable caching, performance concerns).

Order of precedence: `.pnpmfile.cjs` has the highest precedence, followed by `unsupportedPackageJsonSettings`<></>, `globalPeerDependencyRules`<></>, `globalPackageExtensions`<></>, and `globalOverrides` has lowest precedence.

PNPM documentation: https://pnpm.io/package\_json\#pnpmpackageextensions


</td></tr>
<tr><td>

[globalPatchedDependencies](./rush-lib.pnpmoptionsconfiguration.globalpatcheddependencies.md)


</td><td>

`readonly`


</td><td>

Record&lt;string, string&gt; \| undefined


</td><td>

(GENERATED BY RUSH-PNPM PATCH-COMMIT) When modifying this property, make sure you know what you are doing.

The `globalPatchedDependencies` is added/updated automatically when you run pnpm patch-commit command. It is a dictionary where the key should be the package name and exact version. The value should be a relative path to a patch file.

PNPM documentation: https://pnpm.io/package\_json\#pnpmpatcheddependencies


</td></tr>
<tr><td>

[globalPeerDependencyRules](./rush-lib.pnpmoptionsconfiguration.globalpeerdependencyrules.md)


</td><td>

`readonly`


</td><td>

[IPnpmPeerDependencyRules](./rush-lib.ipnpmpeerdependencyrules.md) \| undefined


</td><td>

The `globalPeerDependencyRules` setting provides various settings for suppressing validation errors that are reported during installation with `strictPeerDependencies=true`<></>. The settings are copied into the `pnpm.peerDependencyRules` field of the `common/temp/package.json` file that is generated by Rush during installation.

Order of precedence: `.pnpmfile.cjs` has the highest precedence, followed by `unsupportedPackageJsonSettings`<></>, `globalPeerDependencyRules`<></>, `globalPackageExtensions`<></>, and `globalOverrides` has lowest precedence.

https://pnpm.io/package\_json\#pnpmpeerdependencyrules


</td></tr>
<tr><td>

[jsonFilename](./rush-lib.pnpmoptionsconfiguration.jsonfilename.md)


</td><td>

`readonly`


</td><td>

string \| undefined


</td><td>


</td></tr>
<tr><td>

[minimumReleaseAge](./rush-lib.pnpmoptionsconfiguration.minimumreleaseage.md)


</td><td>

`readonly`


</td><td>

number \| undefined


</td><td>

The minimum number of minutes that must pass after a version is published before pnpm will install it. This setting helps reduce the risk of installing compromised packages, as malicious releases are typically discovered and removed within a short time frame.


</td></tr>
<tr><td>

[minimumReleaseAgeExclude](./rush-lib.pnpmoptionsconfiguration.minimumreleaseageexclude.md)


</td><td>

`readonly`


</td><td>

string\[\] \| undefined


</td><td>

List of package names or patterns that are excluded from the minimumReleaseAge check. These packages will always install the newest version immediately, even if minimumReleaseAge is set.


</td></tr>
<tr><td>

[pnpmLockfilePolicies](./rush-lib.pnpmoptionsconfiguration.pnpmlockfilepolicies.md)


</td><td>

`readonly`


</td><td>

[IPnpmLockfilePolicies](./rush-lib.ipnpmlockfilepolicies.md) \| undefined


</td><td>

The `pnpmLockfilePolicies` setting defines the policies that govern the `pnpm-lock.yaml` file.


</td></tr>
<tr><td>

[pnpmStore](./rush-lib.pnpmoptionsconfiguration.pnpmstore.md)


</td><td>

`readonly`


</td><td>

[PnpmStoreLocation](./rush-lib.pnpmstorelocation.md)


</td><td>

The method used to resolve the store used by PNPM.


</td></tr>
<tr><td>

[pnpmStorePath](./rush-lib.pnpmoptionsconfiguration.pnpmstorepath.md)


</td><td>

`readonly`


</td><td>

string


</td><td>

The path for PNPM to use as the store directory.

Will be overridden by environment variable RUSH\_PNPM\_STORE\_PATH


</td></tr>
<tr><td>

[preventManualShrinkwrapChanges](./rush-lib.pnpmoptionsconfiguration.preventmanualshrinkwrapchanges.md)


</td><td>

`readonly`


</td><td>

boolean


</td><td>

If true, then `rush install` will report an error if manual modifications were made to the PNPM shrinkwrap file without running `rush update` afterwards.


</td></tr>
<tr><td>

[resolutionMode](./rush-lib.pnpmoptionsconfiguration.resolutionmode.md)


</td><td>

`readonly`


</td><td>

[PnpmResolutionMode](./rush-lib.pnpmresolutionmode.md) \| undefined


</td><td>

This setting determines how PNPM chooses version numbers during `rush update`<></>.


</td></tr>
<tr><td>

[strictPeerDependencies](./rush-lib.pnpmoptionsconfiguration.strictpeerdependencies.md)


</td><td>

`readonly`


</td><td>

boolean


</td><td>

If true, then Rush will add the "--strict-peer-dependencies" option when invoking PNPM.


</td></tr>
<tr><td>

[unsupportedPackageJsonSettings](./rush-lib.pnpmoptionsconfiguration.unsupportedpackagejsonsettings.md)


</td><td>

`readonly`


</td><td>

unknown \| undefined


</td><td>

(USE AT YOUR OWN RISK) This is a free-form property bag that will be copied into the `common/temp/package.json` file that is generated by Rush during installation. This provides a way to experiment with new PNPM features. These settings will override any other Rush configuration associated with a given JSON field except for `.pnpmfile.cjs`<></>.

USAGE OF THIS SETTING IS NOT SUPPORTED BY THE RUSH MAINTAINERS AND MAY CAUSE RUSH TO MALFUNCTION. If you encounter a missing PNPM setting that you believe should be supported, please create a GitHub issue or PR. Note that Rush does not aim to support every possible PNPM setting, but rather to promote a battle-tested installation strategy that is known to provide a good experience for large teams with lots of projects.


</td></tr>
<tr><td>

[useWorkspaces](./rush-lib.pnpmoptionsconfiguration.useworkspaces.md)


</td><td>

`readonly`


</td><td>

boolean


</td><td>

If true, then Rush will use the workspaces feature to install and link packages when invoking PNPM.


</td></tr>
</tbody></table>

## Methods

<table><thead><tr><th>

Method


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[updateGlobalOnlyBuiltDependencies(onlyBuiltDependencies)](./rush-lib.pnpmoptionsconfiguration.updateglobalonlybuiltdependencies.md)


</td><td>


</td><td>

Updates globalOnlyBuiltDependencies field of the PNPM options in the common/config/rush/pnpm-config.json file.


</td></tr>
<tr><td>

[updateGlobalPatchedDependencies(patchedDependencies)](./rush-lib.pnpmoptionsconfiguration.updateglobalpatcheddependencies.md)


</td><td>


</td><td>

Updates patchedDependencies field of the PNPM options in the common/config/rush/pnpm-config.json file.


</td></tr>
</tbody></table>

